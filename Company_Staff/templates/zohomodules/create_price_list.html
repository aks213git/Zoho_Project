{% extends 'base.html' %}
{% block content %}
{% load static %}



<body>

    <div class="body-wrapper">
    <div class="container-fluid">
            <div class="overflow-auto">

                <h1 class="text-white">Create Price List</h1>
                <form method="post" action="{% url 'create_price_list' %}">
                    {% csrf_token %}

                    <div class="form-group">
                        <label for="name" class="text-white">Name:</label>
                        <input type="text" name="name" class="form-control" required>
                    </div>

                    <div class="form-group">
                        <label for="type" class="text-white">Type:</label>
                        <select name="type" class="form-control" required>
                            <option value="Sales">Sales</option>
                            <option value="Purchase">Purchase</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="item_rate_type" class="text-white">Tax Preference:</label>
                        <select name="item_rate_type" class="form-control" required>
                            <option value="Percentage">Markup/Markdown by Percentage</option>
                            <option value="Each Item">Enter Rate Individually for Each Item</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="description" class="text-white">Description:</label>
                        <textarea name="description" rows="2" class="form-control" required></textarea>
                    </div>

                    <div id="percentage_fields" style="display: none;">
                        <div class="form-group">
                            <label for="percentage_type" class="text-white">Percentage:</label>
                            <select name="percentage_type" class="form-control">
                                <option value="Markup">Markup</option>
                                <option value="Markdown">Markdown</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="percentage_value" class="text-white">Percentage Value:</label>
                            <input type="number" name="percentage_value" class="form-control">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="round_off" class="text-white">Round Off:</label>
                        <select name="round_off" class="form-control">
                            <option value="Never Mind">Never Mind</option>
                            <option value="Nearest Whole Number">Nearest Whole Number</option>
                            <option value="0.99">0.99</option>
                            <option value="0.50">0.50</option>
                            <option value="0.49">0.49</option>
                        </select>
                    </div>

                    <div id="currency_field" style="display: none;">
                        <div class="form-group">
                            <label for="currency" class="text-white">Currency:</label>
                            <select name="currency" class="form-control">
                                <option value="Indian Rupee">Indian Rupee</option>
                            </select>
                        </div>
                    </div>

                    <h2>Customize Item Rates in Bulk</h2>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Item Details</th>
                                <th>Standard Rate (INR)</th>
                                <th>Custom Rate (INR)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in items %}
                            <tr>
                                <td>{{ item.item_name }}</td>
                                <td>{{ item.selling_price }}</td>
                                <td>
                                    <input type="number" name="items" value="{{ item.id }}-{{ item.selling_price }}"
                                        class="form-control">
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>

                    <br>
                    <button type="submit" class="btn btn-primary">Save</button>
                    <button type="button" class="btn btn-secondary">Cancel</button>
                </form>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const itemRateTypeSelect = document.querySelector("select[name='item_rate_type']");
            const percentageFields = document.getElementById("percentage_fields");
            const currencyField = document.getElementById("currency_field");

            itemRateTypeSelect.addEventListener("change", function () {
                if (this.value === "Percentage") {
                    percentageFields.style.display = "block";
                    currencyField.style.display = "none";
                } else if (this.value === "Each Item") {
                    percentageFields.style.display = "none";
                    currencyField.style.display = "block";
                } else {
                    percentageFields.style.display = "none";
                    currencyField.style.display = "none";
                }
            });

            itemRateTypeSelect.dispatchEvent(new Event("change"));
        });
    </script>

</body>

</html>

{% endblock %}
