{% extends 'base.html' %}
{% block content %}
{% load static %}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Price List</title>
</head>
<body>
    <style>
        form{
            margin-left: 30%;
            margin-top: 10%;
        }
    </style>

    
    
    
    
    <body>
        
        <div class="body-wrapper">
            <div class="container-fluid">
                <div style="overflow-x:auto;"> 
                    
                <h1>Create Price List</h1>
                <form method="post" action="{% url 'create_price_list' %}">
                    {% csrf_token %}
                    
                    <label for="name">Name:</label>
                    <input type="text" name="name" required><br>
                    
                    <label for="type">Type:</label>
                    <select name="type" required>
                        <option value="Sales">Sales</option>
                        <option value="Purchase">Purchase</option>
                    </select><br>
                    
                    <label for="item_rate_type">Tax Preference:</label>
                    <select name="item_rate_type" required>
                        <option value="Percentage">Markup/Markdown by Percentage</option>
                        <option value="Each Item">Enter Rate Individually for Each Item</option>
                    </select><br>
                    
                    <label for="description">Description:</label>
                    <textarea name="description" rows="3" required></textarea><br>
                
                    <div id="percentage_fields" style="display: none;">
                        <label for="percentage_type">Percentage:</label>
                        <select name="percentage_type">
                            <option value="Markup">Markup</option>
                            <option value="Markdown">Markdown</option>
                        </select><br>
                        
                        <label for="percentage_value">Percentage Value:</label>
                        <input type="number" name="percentage_value"><br>
                    </div>
                
                
                    <label for="round_off">Round Off:</label>
                    <select name="round_off">
                        <option value="Never Mind">Never Mind</option>
                        <option value="Nearest Whole Number">Nearest Whole Number</option>
                        <option value="0.99">0.99</option>
                        <option value="0.50">0.50</option>
                        <option value="0.49">0.49</option>
                    </select><br>
                
                    <div id="currency_field" style="display: none;">
                        <label for="currency">Currency:</label>
                        <select name="currency">
                            <option value="Indian Rupee">Indian Rupee</option>
                        </select><br>
                    </div>
                
                    <h2>Customize Item Rates in Bulk</h2>
                    <table border="1">
                        <thead>
                            <tr>
                                <th>Item Details</th>
                                <th>Standard Rate (INR)</th>
                                <th>Custom Rate (INR)</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in items %}
                            <tr>
                                <td>{{ item.item_name }}</td>
                                <td>{{ item.selling_price }}</td>
                                <td>
                                    <input type="number" name="items" value="{{ item.id }}-{{ item.selling_price }}">
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                
                    <br>
                    <input type="submit" value="Save">
                    <button type="button" >Cancel</button>
                </form>
      </div>
    </div>
  </body>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        const itemRateTypeSelect = document.querySelector("select[name='item_rate_type']");
        const percentageFields = document.getElementById("percentage_fields");
        const currencyField = document.getElementById("currency_field");

        itemRateTypeSelect.addEventListener("change", function() {
            if (this.value === "Percentage") {
                percentageFields.style.display = "block";
                currencyField.style.display = "none";
            } else if (this.value === "Each Item") {
                percentageFields.style.display = "none";
                currencyField.style.display = "block";
            } else {
                percentageFields.style.display = "none";
                currencyField.style.display = "none";
            }
        });

        itemRateTypeSelect.dispatchEvent(new Event("change"));
    });
</script>

</body>
</html>

{% endblock %}